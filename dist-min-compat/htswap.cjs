var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),s=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},c=(n,r,a)=>(a=n==null?{}:e(i(n)),s(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n)),l=o(((exports,t)=>{function n(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function r(e){return function(){var t=this,r=arguments;return new Promise(function(i,a){var o=e.apply(t,r);function s(e){n(o,i,a,s,c,`next`,e)}function c(e){n(o,i,a,s,c,`throw`,e)}s(void 0)})}}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})),u=c(l(),1);function d(){return f.apply(this,arguments)}function f(){return f=(0,u.default)(function*(e=location.href,t=`body`,n=`push`){let r=document.querySelector(t);r==null||r.setAttribute(`aria-busy`,`true`);let i=yield fetch(e,{headers:{"htswap-target":t}}),a=new DOMParser().parseFromString(yield i.text(),`text/html`),o=a.querySelector(t);if(!o||!r)return console.error(`HTSWAP: Target "${t}" not found`);r.outerHTML=o.outerHTML,n===`push`?history.pushState({target:t},``,e):n===`replace`&&history.replaceState({target:t},``,e)}),f.apply(this,arguments)}function p(){document.querySelectorAll(`[target]:not([data-htswap-locked]):not([target^="_"])`).forEach(e=>{e.setAttribute(`data-htswap-locked`,`true`),e instanceof HTMLAnchorElement?e.onclick=t=>{t.preventDefault(),d(e.getAttribute(`href`)||void 0,e.getAttribute(`target`)||void 0,e.getAttribute(`data-htswap-history`)||void 0)}:e instanceof HTMLFormElement&&(e.onsubmit=t=>{t.preventDefault();let n=e.getAttribute(`action`)||location.href,r=new URLSearchParams(new FormData(e)).toString();d(n+(n.includes(`?`)?`&`:`?`)+r,e.getAttribute(`target`)||void 0,e.getAttribute(`data-htswap-history`)||void 0)})})}function m(){p(),new MutationObserver(p).observe(document.documentElement,{childList:!0,subtree:!0}),window.addEventListener(`popstate`,e=>{var t;return d(void 0,(t=e.state)==null?void 0:t.target,`none`)})}m(),exports.htswapAssign=p,exports.htswapInit=m,exports.htswapReplace=d;