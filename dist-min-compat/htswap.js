function e(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function t(t){return function(){var n=this,r=arguments;return new Promise(function(i,a){var o=t.apply(n,r);function s(t){e(o,i,a,s,c,`next`,t)}function c(t){e(o,i,a,s,c,`throw`,t)}s(void 0)})}}function n(){return r.apply(this,arguments)}function r(){return r=t(function*(e=location.href,t=`body`,n=`push`){let r=document.querySelector(t);r==null||r.setAttribute(`aria-busy`,`true`);let i=yield fetch(e,{headers:{"htswap-target":t}}),a=new DOMParser().parseFromString(yield i.text(),`text/html`),o=a.querySelector(t);if(!o||!r)return console.error(`HTSWAP: Target "${t}" not found`);r.outerHTML=o.outerHTML,n===`push`?history.pushState({target:t},``,e):n===`replace`&&history.replaceState({target:t},``,e)}),r.apply(this,arguments)}function i(){document.querySelectorAll(`[target]:not([data-htswap-locked]):not([target^="_"])`).forEach(e=>{e.setAttribute(`data-htswap-locked`,`true`),e instanceof HTMLAnchorElement?e.onclick=t=>{t.preventDefault(),n(e.getAttribute(`href`)||void 0,e.getAttribute(`target`)||void 0,e.getAttribute(`data-htswap-history`)||void 0)}:e instanceof HTMLFormElement&&(e.onsubmit=t=>{t.preventDefault();let r=e.getAttribute(`action`)||location.href,i=new URLSearchParams(new FormData(e)).toString();n(r+(r.includes(`?`)?`&`:`?`)+i,e.getAttribute(`target`)||void 0,e.getAttribute(`data-htswap-history`)||void 0)})})}function a(){i(),new MutationObserver(i).observe(document.documentElement,{childList:!0,subtree:!0}),window.addEventListener(`popstate`,e=>{var t;return n(void 0,(t=e.state)==null?void 0:t.target,`none`)})}a();export{i as htswapAssign,a as htswapInit,n as htswapReplace};